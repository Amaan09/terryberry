<div
  class="myinfo-container"
  fxLayout="row"
  fxLayoutAlign="center center"
  *ngIf="dataLoaded">

  <mat-card
    class="myinfo-card">
    <div
      class="myinfo-card-heading">
      My Info
    </div>

      <div
        class="myinfo-card-list"
        fxLayout="column"
        fxLayoutAlign="space-between start">

        <form
          [formGroup]="myInfoForm"
          (ngSubmit)="onSubmit()">

          <div
            class="myinfo-card-list-item"
            fxLayout="row"
            fxLayoutAlign="space-between center"
            *ngFor="let item of displayedItems">

            <div
              class="myinfo-card-list-item--subheading"
              fxFlex="50">
              {{item.name}}

              <button
                type="button"
                mat-stroked-button
                (click)="addHobbies()"
                *ngIf="item.isArray && editMode">
                Add Hobby</button>

            </div>
            <div
              fxFlex="50"
              *ngIf="!item.isArray && editMode">
              <mat-form-field>
                <mat-label
                  class="myinfo-card-list-item--subheading">
                  {{item.name}}
                </mat-label>
                <input
                  [id]="item.value"
                  matInput
                  [formControlName]="item.value">
              </mat-form-field>
            </div>

            <div
              fxFlex="50"
              *ngIf="!editMode">
              <span>
                {{item.isArray && this.myInfo[item.value] ? this.myInfo[item.value].join(', ') : this.myInfo[item.value]}}
              </span>
            </div>

            <div
              fxFlex="50"
              formArrayName="hobbies"
              *ngIf="item.isArray && editMode">
              <div
                class="myinfo-card-list-item--hobbies"
                *ngFor="let hobby of hobbies.controls; let i=index">
                <mat-form-field>
                  <mat-label>
                    {{item.name + ' - ' + (i +1)}}
                  </mat-label>
                  <input
                    matInput
                    [id]="item.value + i"
                    [formControlName]="i">
                </mat-form-field>
                <button
                  mat-stroked-button
                  type="button"
                  (click)="removeHobbies(i)">
                  X
                </button>
              </div>
            </div>
          </div>
          <div
            class="myinfo-card-list-actions"
            fxLayout="row"
            fxLayoutAlign="center center">
            <button
              mat-stroked-button
              color="primary"
              type="button"
              (click)="editMode = !editMode"
              *ngIf="!editMode">
              Edit
            </button>

            <button
              mat-stroked-button
              color="primary"
              type="submit"
              *ngIf="editMode"
              [disabled]="myInfoForm.invalid">
              Update
            </button>

            <button
              mat-stroked-button
              color="primary"
              type="button"
              (click)="editMode = !editMode"
              *ngIf="editMode">
              Cancel
            </button>
          </div>
        </form>
      </div>
  </mat-card>
</div>
